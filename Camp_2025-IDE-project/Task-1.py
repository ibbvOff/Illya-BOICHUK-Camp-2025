import numpy as np 
import matplotlib.pyplot as plt 

h = np.random.randint(0, 101, 20)
print("Згенеровані висоти:", h)

def find_lake(h):
    """
    Функція для пошуку найглибшого озера серед заданих висот.
    
    Параметри:
    h (array) - масив висот
    
    Повертає:
    max_d (int) - максимальна знайдена глибина озера
    lake (tuple) - Набір значень з індексами (ліва стінка, найнижча точка, права стінка)
    """
    n = len(h)  # Кількість висот
    max_d = 0   # Максимальна знайдена глибина
    lake = None  # Координати найглибшого озера
    
    # Перебираємо всі можливі пари точок для лівої і правої стінки озера
    for l in range(n-2):  # l - індекс лівої стінки
        for r in range(l + 2, n):  # r - індекс правої стінки (мінімум 2 позиції від лівої)
            wall_h = min(h[l], h[r])  # Висота нижчої стінки визначає рівень води
            mid_h = h[l+1:r]  # Висоти між стінками
            
            # Перевіряємо чи всі проміжні висоти нижчі за висоту стінок 
            if max(mid_h) < wall_h:
                min_h = min(mid_h)  # Найнижча точка озера
                min_idx = l + 1 + np.argmin(mid_h)  # Індекс найнижчої точки
                depth = wall_h - min_h  # Глибина озера
                
                # Якщо це озеро глибше за попередні знайдені, зберігаємо його
                if depth > max_d:
                    max_d = depth
                    lake = (l, min_idx, r)
    
    return max_d, lake

depth, lake = find_lake(h)
print(f"Глибина: {depth}")
print(f"Позиції (ліва, дно, права): {lake}")

def plot_h(h, lake):
    """
    Функція для візуалізації висот і знайденого озера.
    
    Параметри:
    h (array) - масив висот
    lake (tuple) - Набір значень з індексами (ліва стінка, найнижча точка, права стінка)
    """
    plt.figure(figsize=(12, 6))
    
    # Відображення всіх висот синім кольором
    plt.plot(h, marker='o', linestyle='-', color='blue', label='Висоти')
    
    # Якщо озеро знайдено, відображаємо його червоним кольором
    if lake:
        l, b, r = lake  # Розпаковуємо індекси (ліва стінка, дно, права стінка)
        
        # Малюємо озеро червоним
        plt.plot(range(l, r + 1), h[l:r + 1], marker='o', linestyle='-', color='red', label='Озеро')
        
        wall_h = min(h[l], h[r])  # Висота нижчої стінки (рівень води)
        
        # Малюємо вертикальну лінію, що показує глибину озера
        plt.plot([b, b], [h[b], wall_h], 'g--', linewidth=2, label='Глибина')

    plt.xlabel("Позиція")
    plt.ylabel("Висота")
    plt.title("Візуалізація висот з озером")
    plt.grid(True)
    plt.legend()
    plt.show()

plot_h(h, lake)